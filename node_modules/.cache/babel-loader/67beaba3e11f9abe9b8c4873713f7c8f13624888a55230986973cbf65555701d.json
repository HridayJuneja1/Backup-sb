{"ast":null,"code":"import React,{useEffect,useState}from'react';import BookCard from'./BookCard';import Sorting from'./Sorting';import Search from'./Search';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BrowseBooks=()=>{const[books,setBooks]=useState([]);const[filteredBooks,setFilteredBooks]=useState([]);const[user]=useState(null);const userId=user===null||user===void 0?void 0:user.id;useEffect(()=>{const fetchBooks=async()=>{try{const response=await fetch('/api/books');if(!response.ok){throw new Error('Network response was not ok');}const data=await response.json();const formattedBooks=data.map(book=>({id:book._id,title:book.title||'',author:book.author||'',image:book.image||''}));setBooks(formattedBooks);setFilteredBooks(formattedBooks);// Initialize filteredBooks with all books\n}catch(error){console.error(\"Error fetching books:\",error);}};fetchBooks();},[]);// Sorting books\nconst sortBooks=order=>{let sortedArray=[...filteredBooks];// Sort based on filteredBooks\nif(order==='asc'){sortedArray.sort((a,b)=>a.title.localeCompare(b.title));}else if(order==='desc'){sortedArray.sort((a,b)=>b.title.localeCompare(a.title));}setFilteredBooks(sortedArray);// Update filteredBooks with the sorted array\n};// Filtering books\nconst filterBooks=searchTerm=>{if(!searchTerm.trim()){setFilteredBooks(books);// Reset to all books if no search term\n}else{const search=searchTerm.trim().toLowerCase();const filteredArray=books.filter(book=>book.title&&book.title.toLowerCase().includes(search)||book.author&&book.author.toLowerCase().includes(search));setFilteredBooks(filteredArray);// Update with filtered books\n}};const searchContainerStyle={display:'flex',justifyContent:'center',alignItems:'center',backgroundColor:'#000',padding:'20px'};const sortingContainerStyle={display:'flex',justifyContent:'flex-end',paddingRight:'20px',backgroundColor:'#000',paddingBottom:'10px'};const pageStyle={display:'flex',flexWrap:'wrap',justifyContent:'space-around',alignItems:'flex-start',backgroundColor:'#000',padding:'20px',color:'white'};const noBooksStyle={textAlign:'center',color:'white',fontSize:'1.5rem'};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:searchContainerStyle,children:/*#__PURE__*/_jsx(Search,{filterBooks:filterBooks})}),/*#__PURE__*/_jsx(\"div\",{style:sortingContainerStyle,children:/*#__PURE__*/_jsx(Sorting,{sortBooks:sortBooks})}),/*#__PURE__*/_jsx(\"div\",{style:pageStyle,children:filteredBooks.length>0?filteredBooks.map(book=>/*#__PURE__*/_jsx(BookCard,{book:book,userId:userId},book.id)):/*#__PURE__*/_jsx(\"div\",{style:noBooksStyle,children:\"No books found\"})})]});};export default BrowseBooks;","map":{"version":3,"names":["React","useEffect","useState","BookCard","Sorting","Search","jsx","_jsx","jsxs","_jsxs","BrowseBooks","books","setBooks","filteredBooks","setFilteredBooks","user","userId","id","fetchBooks","response","fetch","ok","Error","data","json","formattedBooks","map","book","_id","title","author","image","error","console","sortBooks","order","sortedArray","sort","a","b","localeCompare","filterBooks","searchTerm","trim","search","toLowerCase","filteredArray","filter","includes","searchContainerStyle","display","justifyContent","alignItems","backgroundColor","padding","sortingContainerStyle","paddingRight","paddingBottom","pageStyle","flexWrap","color","noBooksStyle","textAlign","fontSize","children","style","length"],"sources":["/Users/hrida/SYST35300/samskritabharati/src/components/BrowseBooks.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport BookCard from './BookCard';\r\nimport Sorting from './Sorting';\r\nimport Search from './Search';\r\n\r\nconst BrowseBooks = () => {\r\n  const [books, setBooks] = useState([]);\r\n  const [filteredBooks, setFilteredBooks] = useState([]);\r\n  const [user] = useState(null);\r\n  const userId = user?.id;\r\n\r\n  useEffect(() => {\r\n    const fetchBooks = async () => {\r\n      try {\r\n        const response = await fetch('/api/books');\r\n        if (!response.ok) {\r\n          throw new Error('Network response was not ok');\r\n        }\r\n        const data = await response.json();\r\n        const formattedBooks = data.map(book => ({\r\n          id: book._id,\r\n          title: book.title || '',\r\n          author: book.author || '',\r\n          image: book.image || ''\r\n        }));\r\n        setBooks(formattedBooks);\r\n        setFilteredBooks(formattedBooks); // Initialize filteredBooks with all books\r\n      } catch (error) {\r\n        console.error(\"Error fetching books:\", error);\r\n      }\r\n    };\r\n\r\n    fetchBooks();\r\n  }, []);\r\n\r\n  // Sorting books\r\n  const sortBooks = (order) => {\r\n    let sortedArray = [...filteredBooks]; // Sort based on filteredBooks\r\n\r\n    if (order === 'asc') {\r\n      sortedArray.sort((a, b) => a.title.localeCompare(b.title));\r\n    } else if (order === 'desc') {\r\n      sortedArray.sort((a, b) => b.title.localeCompare(a.title));\r\n    }\r\n\r\n    setFilteredBooks(sortedArray); // Update filteredBooks with the sorted array\r\n  };\r\n\r\n  // Filtering books\r\n  const filterBooks = (searchTerm) => {\r\n    if (!searchTerm.trim()) {\r\n      setFilteredBooks(books); // Reset to all books if no search term\r\n    } else {\r\n      const search = searchTerm.trim().toLowerCase();\r\n      const filteredArray = books.filter(book =>\r\n        (book.title && book.title.toLowerCase().includes(search)) ||\r\n        (book.author && book.author.toLowerCase().includes(search))\r\n      );\r\n      setFilteredBooks(filteredArray); // Update with filtered books\r\n    }\r\n  };\r\n\r\n  const searchContainerStyle = {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    backgroundColor: '#000',\r\n    padding: '20px',\r\n  };\r\n\r\n  const sortingContainerStyle = {\r\n    display: 'flex',\r\n    justifyContent: 'flex-end',\r\n    paddingRight: '20px',\r\n    backgroundColor: '#000',\r\n    paddingBottom: '10px',\r\n  };\r\n\r\n  const pageStyle = {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    justifyContent: 'space-around',\r\n    alignItems: 'flex-start',\r\n    backgroundColor: '#000',\r\n    padding: '20px',\r\n    color: 'white',\r\n  };\r\n\r\n  const noBooksStyle = {\r\n    textAlign: 'center',\r\n    color: 'white',\r\n    fontSize: '1.5rem',\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div style={searchContainerStyle}>\r\n        <Search filterBooks={filterBooks} />\r\n      </div>\r\n      <div style={sortingContainerStyle}>\r\n        <Sorting sortBooks={sortBooks} />\r\n      </div>\r\n      <div style={pageStyle}>\r\n        {filteredBooks.length > 0 ? (\r\n          filteredBooks.map((book) => (\r\n            <BookCard key={book.id} book={book} userId={userId} />\r\n          ))\r\n        ) : (\r\n          <div style={noBooksStyle}>No books found</div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BrowseBooks;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}